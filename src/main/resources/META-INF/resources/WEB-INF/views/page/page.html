<!DOCTYPE html>
<html layout:decorate="~{index.html}">
<div layout:fragment="content">
	<script>
	// defines variables
	const page = new duice.Map();
	
	// document ready
	$(document).ready(function() {
		getPage();
	});
	
	/**
	 * Getting page
	 */
	function getPage(){
		$.ajax({
			 url: '[[@{/api/pages}]]/[[${page.id}]]'
			,type: 'GET'
		})
		.done(function(data, textStatus, jqXHR) {
			page.fromJson(data);
			if(page.get('format') === 'MARKDOWN'){
				$('#contentsMarkdownDiv').show();
				$('#contentsHtmlDiv').hide();
			}else if(page.get('format') === 'HTML'){
				$('#contentsHtmlDiv').show();
				$('#contentsMarkdownDiv').hide();
			}
	   	});
	}
	
	/**
	 * Edits page
	 */
	function editPage(){
		var pageId = page.get('id');
		window.location.href = "[[@{/page}]]/[[${page.id}]]/editPage" + "?id=" + pageId;
	}
	</script>
	<th:block th:include="|../theme/${__theme}/page/page.html|"></th:block>
</div>