<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="net.oopscraft.application.core.user.UserDao">

    <resultMap id="user" type="net.oopscraft.application.core.user.User">
        <result column="USR_ID" property="id"/>
        <result column="USR_EMAIL" property="email"/>
        <result column="USR_MOB_NO" property="mobileNumber"/>
        <result column="USR_NM" property="name"/>
        <result column="USR_NICK" property="nickname"/>
        <result column="USR_PWD" property="password"/>
        <result column="USE_YN" property="useYn"/>
    </resultMap>

	<select id="selectUserList" resultMap="user">
		<![CDATA[
		SELECT 	 AUI.USR_ID
				,AUI.USR_EMAIL
				,AUI.USR_MOB_NO
				,AUI.USR_NM
				,AUI.USR_NICK
				,AUI.USR_PWD
				,AUI.USE_YN
		FROM 	APP_USR_INF AUI
		]]>
		<if test="key != null and key != ''">
		<![CDATA[
		WHERE 	AUI.${key} LIKE '%'||#{value}||'%'
		]]>
		</if>
		<![CDATA[
		LIMIT 	${rows}
		OFFSET 	${(page-1)*rows}
		]]>
	</select>
	
	<select id="selectUser" resultMap="user">
		<![CDATA[
		SELECT 	 AUI.USR_ID
				,AUI.USR_EMAIL
				,AUI.USR_MOB_NO
				,AUI.USR_NM
				,AUI.USR_NICK
				,AUI.USR_PWD
				,AUI.USE_YN
		FROM 	APP_USR_INF AUI
		WHERE 	AUI.USR_ID = #{id}
		]]>
	</select>
	
	<insert id="insertUser">
		<![CDATA[
		INSERT INTO APP_USR_INF (
			 USR_ID
			,USR_EMAIL
			,USR_MOB_NO
			,USR_NM
			,USR_NICK
			,USR_PWD
			,USE_YN
		) VALUES (
			 #{id}
			,#{email}
			,#{mobileNumber}
			,#{name}
			,#{nickname}
			,#{password}
			,#{useYn}
		)
		]]>
	</insert>
	
	<update id="updateUser">
		<![CDATA[
		UPDATE	APP_USR_INF
		SET 	 USR_EMAIL = #{email}
				,USR_MOB_NO = #{mobileNumber}
				,USR_NM = #{name}
				,USR_NICK = #{nickname}
				,USR_PWD = #{password}
				,USE_YN = #{useYn}
		WHERE	USR_ID = #{id}
		]]>
	</update>

	<delete id="deleteUser">
		<![CDATA[
		DELETE
		FROM 	APP_USR_INF
		WHERE 	USR_ID = #{id}
		]]>
	</delete>
	
	
	
	
	
	
</mapper>
