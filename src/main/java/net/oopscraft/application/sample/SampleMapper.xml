<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="net.oopscraft.application.sample.SampleMapper">

    <resultMap id="sample" type="net.oopscraft.application.sample.entity.Sample">
    	<result column="KEY_1" property="key1"/>
    	<result column="KEY_2" property="key2"/>
    	<result column="VAL_CHAR" property="valueChar"/>
    	<result column="VAL_CLOB" property="valueClob"/>
    	<result column="VAL_INT" property="valueInt"/>
    	<result column="VAL_LONG" property="valueLong"/>
    	<result column="VAL_YN" property="VAL_YN"/>
    	<result column="VAL_ENUM" property="VAL_ENUM"/>
    	<result column="valSubQuery" property="valSubQuery"/>
    </resultMap>

	<select id="getSamples" resultMap="sample">
		<![CDATA[
		/* comment */
		SELECT 	 A.KEY_1
				,A.KEY_2
				,A.VAL_CHAR
				,A.VAL_CLOB
				,A.VAL_INT
				,A.VAL_LONG
				,A.VAL_YN
				,A.VAL_ENUM
				,(SELECT COUNT(*) FROM APP_SMPL_INFO) AS "valSubQuery"
		FROM 	APP_SMPL_INFO A
		WHERE 	1 = 1
		]]>
		<if test="key1 != null">
		<![CDATA[
		AND 	A.KEY_1 = #{key1}
		]]>
		</if>
		<![CDATA[
		ORDER BY A.KEY_1 ASC
		]]>
	</select>
	
	<select id="getSampleSummary" resultType="hashmap">
		<![CDATA[
		/* comment */
		SELECT 	 DISTINCT
				 A.VAL_ENUM
				,COUNT(*)
		FROM 	APP_SMPL_INFO A
		WHERE 	1 = 1
		]]>
		<if test="key1 != null">
		<![CDATA[
		AND 	A.KEY_1 = #{key1}
		]]>
		</if>
		<![CDATA[
		GROUP BY A.VAL_ENUM
		]]>
	</select>
	
	
</mapper>
